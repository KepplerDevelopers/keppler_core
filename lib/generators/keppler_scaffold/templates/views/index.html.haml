#index-container{ :controller => "<%= plural_table_name %>" }
  .container
    .row
      .listing.col-lg-12.col-xs-12
        %section.content-header.index-header
          %h1
            = t("keppler.modules.#{controller_path.underscore}")
          .toolbar
            .mailbox-controls
              .btn-group
                = link_to reload_admin_<%= plural_table_name %>_path, class: "tool-btn", remote: true do
                  %i.icon-reload
              .btn-group
                = link_to admin_<%= plural_table_name %>_path(:format => :xls), class: "tool-btn", title: 'Save as .xls' do
                  %i.icon-cloud-download
                = link_to "", class: "tool-btn", title: 'Import File', id: "<%= singular_table_name %" do
                  %i.icon-cloud-upload
              / Check all button
              .btn-group
                %a.tool-btn.checkbox-toggle{"@click" => "selectAll()"}
                  .pretty.p-default.p-curve.p-thick.p-smooth
                    %input{ type:"checkbox", class: "filled-in", id: "checkbox-all", ":disabled"=>"checkItems ? disabled : ''"}
                    .state.p-danger-o
                      %label{ for: "checkbox-all" }
                %a.tool-btn{"data-confirm" => "¿Estás seguro?", "data-method" => "delete", "v-bind:href" => "link", :rel => "nofollow", ":disabled"=>"checks ? disabled : ''" }
                  %i.icon-trash
          %ol.breadcrumb
            %li
              %a{:href => "#"}
                %i.icon-directions
                = t("keppler.modules.#{action_name.underscore}")
            -# %li
            -#   %a{:href => "#"} UI
            -# %li.active General

        =# entries(@total, @objects)

        .box.slice-box
          .box-body.no-padding

            %table.table.table-striped
              %thead
                - if @objects.size.zero?
                  %tr
                    %th{:style => 'text-align: center;'}
                      %h6= t('keppler.messages.not_found_records', model:  t("keppler.models.pluralize.<%= plural_table_name %>"))
                - else
                  %tr
                    %td
                     %th= t("activerecord.attributes.avatar")
                    %th= t("activerecord.attributes.name")
                    %th.visible-lg.visible.md= t("activerecord.attributes.email")
                    %th{:style => "width: 20%;"}
                      Actions
              %tbody#objects-container{ "data-update-url" => "#{sort_admin_<%= plural_table_name %>_path}" }
                = render 'admin/layouts/listing_preloader'
                = render 'listing', objects: @objects
        %center#paginator-module
          = paginate @objects, window: 1
  .listing-show.visible-lg.visible-md
    = render "description"
  %aside#index-show.control-sidebar
  .mixed-btn
    = link_to new_admin_<%= singular_table_name %_path, class: "btn-float" do
      %i.material-icons add
:javascript
  $(document).ready(function(){
    $('#<%= singular_table_name %').click(function() {
      $('#import_file_<%= singular_table_name %').click()
      $('#import_file_<%= singular_table_name %').change(function() {
        $('.waiting').css('display', 'block')
        $('#import_form_<%= singular_table_name %').submit()
      })
    });
  });
