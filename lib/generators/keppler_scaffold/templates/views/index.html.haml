#index-container{ :controller => "<%= plural_table_name %>" }
  .container
    .row
      .listing.col-lg-12.col-xs-12
        %section.content-header.index-header
          %h1
            = t("keppler.modules.#{controller_path.underscore}")
          .toolbar
            .mailbox-controls
              = link_to reload_admin_<%= plural_table_name %>_path, class: "btn btn-default btn-sm", remote: true do
                %i.icon-reload
              .btn-group
                = link_to admin_<%= plural_table_name %>_path(:format => :xls), class: "btn btn-default btn-sm", title: 'Save as .xls' do
                  %i.icon-cloud-download
                = link_to "", class: "btn btn-default btn-sm", title: 'Import File', id: "<%= singular_table_name %>" do
                  %i.icon-cloud-upload
              / Check all button
              .btn-group
                %button.btn.btn-default.btn-sm.checkbox-toggle{:type => "button", "@click" => "selectAll()"}
                  .pretty.p-default.p-curve.p-thick.p-smooth
                    %input{ type:"checkbox", class: "filled-in", id: "checkbox-all", ":disabled"=>"checkItems ? disabled : ''"}
                    .state.p-danger-o
                      %label{ for: "checkbox-all" }
                %a.btn.btn-default.btn-sm{:type => "button", "data-confirm" => "¿Estás seguro?", "data-method" => "delete", "v-bind:href" => "link", :rel => "nofollow", "v-show" => "checks" }
                  %i.icon-trash
          %ol.breadcrumb
            %li
              %a{:href => "#"}
                %i.fa.fa-dashboard
                = t("keppler.modules.#{action_name.underscore}")
            -# %li
            -#   %a{:href => "#"} UI
            -# %li.active General

        =# entries(@total, @objects)

        .box.slice-box
          .box-body.no-padding
            
            %table.table.table-striped
              %thead
                - if @objects.size.zero?
                  %tr
                    %th{:style => 'text-align: center;'}
                      %h6= t('keppler.messages.not_found_records', model:  t("keppler.models.pluralize.<%= plural_table_name %>"))
                - else
                  %tr
                    %td
                    <%- attributes.each do |attribute| -%>
                       <%- if @attachments.include?(attribute.name) -%>
                     %th= t("activerecord.attributes.<%= attribute.name %>")
                       <%- end -%>
                     <%- end -%>
                    <%- attributes.each_with_index do |attribute, index| -%>
                      <%- if index < 6 -%>
                        <%- unless @attachments.include?(attribute.name) -%>
                          <%- unless attribute.type.to_s == 'text' -%>
                            <%- if index < 2 -%>
                    %th= t("activerecord.attributes.<%= attribute.name %>")
                            <%- else -%>
                    %th.visible-lg.visible.md= t("activerecord.attributes.<%= attribute.name %>")
                            <%- end -%>
                          <%- end -%>
                        <%- end -%>
                      <%- end -%>
                    <%- end -%>
                    %th{:style => "width: 20%;"}
                      Actions
              %tbody#objects-container{ "data-update-url" => "#{admin_sorting_<%= plural_table_name %>_path}" }
                = render 'admin/layouts/listing_preloader'
                = render 'listing', objects: @<%= plural_table_name %>
        %center#paginator-module
          = paginate @objects, window: 1
  .listing-show.visible-lg.visible-md
    = render "description"
  %aside#index-show.control-sidebar
  .mixed-btn
    = link_to new_admin_<%= singular_table_name %>_path, class: "btn-float" do
      %i.material-icons add
:javascript
  $(document).ready(function(){
    $('#<%= singular_table_name %>').click(function() {
      $('#import_file_<%= singular_table_name %>').click()
      $('#import_file_<%= singular_table_name %>').change(function() {
        $('.waiting').css('display', 'block')
        $('#import_form_<%= singular_table_name %>').submit()
      })
    });
  });
  
  
