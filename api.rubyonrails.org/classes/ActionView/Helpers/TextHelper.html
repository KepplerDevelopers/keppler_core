<!DOCTYPE html>
<html lang="en">
<head>
    <title>ActionView::Helpers::TextHelper</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="https://api.rubyonrails.org/css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="https://api.rubyonrails.org/css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="https://api.rubyonrails.org/css/github.css" type="text/css" media="screen" />
<script src="https://api.rubyonrails.org/js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://api.rubyonrails.org/js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="https://api.rubyonrails.org/js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>


    <meta property="og:title" value="ActionView::Helpers::TextHelper">

  
    
    <meta name="description" content="The TextHelper module provides a set of methods for filtering, formatting and transforming strings, which can reduce the amount of inline Ruby code in your views.">
    <meta property="og:description" content="The TextHelper module provides a set of methods for filtering, formatting and transforming strings, which can reduce the amount of inline Ruby code in your views.">
  

    <meta name="keywords" content="ActionView::Helpers::TextHelper class">
  
    <meta name="keywords" content="concat, safe_concat, truncate, highlight, excerpt, pluralize, word_wrap, simple_format, cycle, current_cycle, reset_cycle, get_cycle, set_cycle, split_paragraphs, cut_excerpt_part">
  
</head>

<body>
    <div class="banner">
        
            <span>Ruby on Rails 5.2.1</span><br />
        
        <h1>
            <span class="type">Module</span>
            ActionView::Helpers::TextHelper
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/actionview/lib/action_view/helpers/text_helper_rb.html">actionview/lib/action_view/helpers/text_helper.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>The <a href="TextHelper.html">TextHelper</a> module provides a set of
methods for filtering, formatting and transforming strings, which can
reduce the amount of inline Ruby code in your views. These helper methods
extend Action View making them callable within your template files.</p>

<h4 id="module-ActionView::Helpers::TextHelper-label-Sanitization">Sanitization</h4>

<p>Most text helpers that generate HTML output sanitize the given input by
default, but do not escape it. This means HTML tags will appear in the page
but all malicious code will be removed. Let&#39;s look at some examples
using the <code>simple_format</code> method:</p>

<pre><code>simple_format(&#39;&lt;a href=&quot;http://example.com/&quot;&gt;Example&lt;/a&gt;&#39;)
# =&gt; &quot;&lt;p&gt;&lt;a href=\&quot;http://example.com/\&quot;&gt;Example&lt;/a&gt;&lt;/p&gt;&quot;

simple_format(&#39;&lt;a href=&quot;javascript:alert(\&#39;no!\&#39;)&quot;&gt;Example&lt;/a&gt;&#39;)
# =&gt; &quot;&lt;p&gt;&lt;a&gt;Example&lt;/a&gt;&lt;/p&gt;&quot;
</code></pre>

<p>If you want to escape all content, you should invoke the <code>h</code>
method before calling the text helper.</p>

<pre><code>simple_format h(&#39;&lt;a href=&quot;http://example.com/&quot;&gt;Example&lt;/a&gt;&#39;)
# =&gt; &quot;&lt;p&gt;&amp;lt;a href=\&quot;http://example.com/\&quot;&amp;gt;Example&amp;lt;/a&amp;gt;&lt;/p&gt;&quot;
</code></pre>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="TextHelper.html#method-i-concat">concat</a>,
              </li>
            
              
              <li>
                <a href="TextHelper.html#method-i-current_cycle">current_cycle</a>,
              </li>
            
              
              <li>
                <a href="TextHelper.html#method-i-cut_excerpt_part">cut_excerpt_part</a>,
              </li>
            
              
              <li>
                <a href="TextHelper.html#method-i-cycle">cycle</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="TextHelper.html#method-i-excerpt">excerpt</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="TextHelper.html#method-i-get_cycle">get_cycle</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="TextHelper.html#method-i-highlight">highlight</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="TextHelper.html#method-i-pluralize">pluralize</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="TextHelper.html#method-i-reset_cycle">reset_cycle</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="TextHelper.html#method-i-safe_concat">safe_concat</a>,
              </li>
            
              
              <li>
                <a href="TextHelper.html#method-i-set_cycle">set_cycle</a>,
              </li>
            
              
              <li>
                <a href="TextHelper.html#method-i-simple_format">simple_format</a>,
              </li>
            
              
              <li>
                <a href="TextHelper.html#method-i-split_paragraphs">split_paragraphs</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="TextHelper.html#method-i-truncate">truncate</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>W</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="TextHelper.html#method-i-word_wrap">word_wrap</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="SanitizeHelper.html">
              ActionView::Helpers::SanitizeHelper
            </a>
          
        </li>
      
        <li>
          
            <a href="TagHelper.html">
              ActionView::Helpers::TagHelper
            </a>
          
        </li>
      
        <li>
          
            <a href="OutputSafetyHelper.html">
              ActionView::Helpers::OutputSafetyHelper
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    


    <!-- Methods -->
    
    
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-concat">
            
              <b>concat</b>(string)
            
            <a href="TextHelper.html#method-i-concat" name="method-i-concat" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>The preferred method of outputting text in your views is to use the &lt;%=
“text” %&gt; eRuby syntax. The regular <em>puts</em> and <em>print</em>
methods do not operate as expected in an eRuby code block. If you
absolutely must output text within a non-output code block (i.e., &lt;%
%&gt;), you can use the concat method.</p>

<pre><code>&lt;%
    concat &quot;hello&quot;
    # is the equivalent of &lt;%= &quot;hello&quot; %&gt;

    if logged_in
      concat &quot;Logged in!&quot;
    else
      concat link_to(&#39;login&#39;, action: :login)
    end
    # will either display &quot;Logged in!&quot; or a login link
%&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-concat_source')" id="l_method-i-concat_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L54" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-concat_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 54</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">concat</span>(<span class="ruby-identifier">string</span>)
  <span class="ruby-identifier">output_buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">string</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-current_cycle">
            
              <b>current_cycle</b>(name = &quot;default&quot;)
            
            <a href="TextHelper.html#method-i-current_cycle" name="method-i-current_cycle" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns the current cycle string after a cycle has been started. Useful for
complex table highlighting or any other design need which requires the
current cycle string in more than one place.</p>

<pre><code># Alternate background colors
@items = [1,2,3,4]
&lt;% @items.each do |item| %&gt;
  &lt;div style=&quot;background-color:&lt;%= cycle(&quot;red&quot;,&quot;white&quot;,&quot;blue&quot;) %&gt;&quot;&gt;
    &lt;span style=&quot;background-color:&lt;%= current_cycle %&gt;&quot;&gt;&lt;%= item %&gt;&lt;/span&gt;
  &lt;/div&gt;
&lt;% end %&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-current_cycle_source')" id="l_method-i-current_cycle_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L378" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-current_cycle_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 378</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">current_cycle</span>(<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;default&quot;</span>)
  <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">get_cycle</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">current_value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cycle</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-cut_excerpt_part">
            
              <b>cut_excerpt_part</b>(part_position, part, separator, options)
            
            <a href="TextHelper.html#method-i-cut_excerpt_part" name="method-i-cut_excerpt_part" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-cut_excerpt_part_source')" id="l_method-i-cut_excerpt_part_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L465" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-cut_excerpt_part_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 465</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cut_excerpt_part</span>(<span class="ruby-identifier">part_position</span>, <span class="ruby-identifier">part</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-string">&quot;&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">part</span>

  <span class="ruby-identifier">radius</span>   = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:radius</span>, <span class="ruby-value">100</span>)
  <span class="ruby-identifier">omission</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:omission</span>, <span class="ruby-string">&quot;...&quot;</span>)

  <span class="ruby-identifier">part</span> = <span class="ruby-identifier">part</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">separator</span>)
  <span class="ruby-identifier">part</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-identifier">affix</span> = <span class="ruby-identifier">part</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">radius</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">omission</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;&quot;</span>

  <span class="ruby-identifier">part</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">part_position</span> <span class="ruby-operator">==</span> <span class="ruby-value">:first</span>
    <span class="ruby-identifier">drop_index</span> = [<span class="ruby-identifier">part</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">radius</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">max</span>
    <span class="ruby-identifier">part</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-identifier">drop_index</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">part</span>.<span class="ruby-identifier">first</span>(<span class="ruby-identifier">radius</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">affix</span>, <span class="ruby-identifier">part</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">separator</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-cycle">
            
              <b>cycle</b>(first_value, *values)
            
            <a href="TextHelper.html#method-i-cycle" name="method-i-cycle" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Creates a Cycle object whose <em>to_s</em> method cycles through elements
of an array every time it is called. This can be used for example, to
alternate classes for table rows. You can use named cycles to allow nesting
in loops. Passing a <a href="../../Hash.html">Hash</a> as the last
parameter with a <code>:name</code> key will create a named cycle. The
default name for a cycle without a <code>:name</code> key is
<code>&quot;default&quot;</code>. You can manually reset a cycle by calling
<a href="TextHelper.html#method-i-reset_cycle">#reset_cycle</a> and passing
the name of the cycle. The current cycle string can be obtained anytime
using the <a
href="TextHelper.html#method-i-current_cycle">#current_cycle</a> method.</p>

<pre><code> # Alternate CSS classes for even and odd numbers...
 @items = [1,2,3,4]
 &lt;table&gt;
 &lt;% @items.each do |item| %&gt;
   &lt;tr class=&quot;&lt;%= cycle(&quot;odd&quot;, &quot;even&quot;) -%&gt;&quot;&gt;
     &lt;td&gt;&lt;%= item %&gt;&lt;/td&gt;
   &lt;/tr&gt;
 &lt;% end %&gt;
 &lt;/table&gt;

 # Cycle CSS classes for rows, and text colors for values within each row
 @items = x = [{first: &#39;Robert&#39;, middle: &#39;Daniel&#39;, last: &#39;James&#39;},
              {first: &#39;Emily&#39;, middle: &#39;Shannon&#39;, maiden: &#39;Pike&#39;, last: &#39;Hicks&#39;},
             {first: &#39;June&#39;, middle: &#39;Dae&#39;, last: &#39;Jones&#39;}]
 &lt;% @items.each do |item| %&gt;
   &lt;tr class=&quot;&lt;%= cycle(&quot;odd&quot;, &quot;even&quot;, name: &quot;row_class&quot;) -%&gt;&quot;&gt;
     &lt;td&gt;
       &lt;% item.values.each do |value| %&gt;
         &lt;%# Create a named cycle &quot;colors&quot; %&gt;
         &lt;span style=&quot;color:&lt;%= cycle(&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, name: &quot;colors&quot;) -%&gt;&quot;&gt;
           &lt;%= value %&gt;
         &lt;/span&gt;
       &lt;% end %&gt;
       &lt;% reset_cycle(&quot;colors&quot;) %&gt;
     &lt;/td&gt;
  &lt;/tr&gt;
&lt;% end %&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-cycle_source')" id="l_method-i-cycle_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L354" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-cycle_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 354</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cycle</span>(<span class="ruby-identifier">first_value</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">values</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:name</span>, <span class="ruby-string">&quot;default&quot;</span>)

  <span class="ruby-identifier">values</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">first_value</span>)

  <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">get_cycle</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">cycle</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">values</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>
    <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">set_cycle</span>(<span class="ruby-identifier">name</span>, <span class="ruby-constant">Cycle</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>))
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-excerpt">
            
              <b>excerpt</b>(text, phrase, options = {})
            
            <a href="TextHelper.html#method-i-excerpt" name="method-i-excerpt" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Extracts an excerpt from <code>text</code> that matches the first instance
of <code>phrase</code>. The <code>:radius</code> option expands the excerpt
on each side of the first occurrence of <code>phrase</code> by the number
of characters defined in <code>:radius</code> (which defaults to 100). If
the excerpt radius overflows the beginning or end of the <code>text</code>,
then the <code>:omission</code> option (which defaults to “…”) will be
prepended/appended accordingly. Use the <code>:separator</code> option to
choose the delimitation. The resulting string will be stripped in any case.
If the <code>phrase</code> isn&#39;t found, <code>nil</code> is returned.</p>

<pre><code>excerpt(&#39;This is an example&#39;, &#39;an&#39;, radius: 5)
# =&gt; ...s is an exam...

excerpt(&#39;This is an example&#39;, &#39;is&#39;, radius: 5)
# =&gt; This is a...

excerpt(&#39;This is an example&#39;, &#39;is&#39;)
# =&gt; This is an example

excerpt(&#39;This next thing is an example&#39;, &#39;ex&#39;, radius: 2)
# =&gt; ...next...

excerpt(&#39;This is also an example&#39;, &#39;an&#39;, radius: 8, omission: &#39;&lt;chop&gt; &#39;)
# =&gt; &lt;chop&gt; is also an example

excerpt(&#39;This is a very beautiful morning&#39;, &#39;very&#39;, separator: &#39; &#39;, radius: 1)
# =&gt; ...a very beautiful...
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-excerpt_source')" id="l_method-i-excerpt_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L175" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-excerpt_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 175</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">excerpt</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">phrase</span>, <span class="ruby-identifier">options</span> = {})
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">text</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">phrase</span>

      <span class="ruby-identifier">separator</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:separator</span>, <span class="ruby-keyword">nil</span>) <span class="ruby-operator">||</span> <span class="ruby-string">&quot;&quot;</span>
      <span class="ruby-keyword">case</span> <span class="ruby-identifier">phrase</span>
      <span class="ruby-keyword">when</span> <span class="ruby-constant">Regexp</span>
        <span class="ruby-identifier">regex</span> = <span class="ruby-identifier">phrase</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">regex</span> = <span class="ruby-regexp">/#{Regexp.escape(phrase)}/i</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">matches</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">regex</span>)
      <span class="ruby-identifier">phrase</span> = <span class="ruby-identifier">matches</span>[<span class="ruby-value">0</span>]

      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">separator</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">separator</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">regex</span>)
            <span class="ruby-identifier">phrase</span> = <span class="ruby-identifier">value</span>
            <span class="ruby-keyword">break</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">first_part</span>, <span class="ruby-identifier">second_part</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">phrase</span>, <span class="ruby-value">2</span>)

      <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">first_part</span>   = <span class="ruby-identifier">cut_excerpt_part</span>(<span class="ruby-value">:first</span>, <span class="ruby-identifier">first_part</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">options</span>)
      <span class="ruby-identifier">postfix</span>, <span class="ruby-identifier">second_part</span> = <span class="ruby-identifier">cut_excerpt_part</span>(<span class="ruby-value">:second</span>, <span class="ruby-identifier">second_part</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">options</span>)

      <span class="ruby-identifier">affix</span> = [<span class="ruby-identifier">first_part</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">phrase</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">second_part</span>].<span class="ruby-identifier">join</span>.<span class="ruby-identifier">strip</span>
      [<span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">affix</span>, <span class="ruby-identifier">postfix</span>].<span class="ruby-identifier">join</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Attempts to pluralize the +singular+ word unless +count+ is 1. If</span>
    <span class="ruby-comment"># +plural+ is supplied, it will use that when count is &gt; 1, otherwise</span>
    <span class="ruby-comment"># it will use the Inflector to determine the plural form for the given locale,</span>
    <span class="ruby-comment"># which defaults to I18n.locale</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># The word will be pluralized using rules defined for the locale</span>
    <span class="ruby-comment"># (you must define your own inflection rules for languages other than English).</span>
    <span class="ruby-comment"># See ActiveSupport::Inflector.pluralize</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   pluralize(1, &#39;person&#39;)</span>
    <span class="ruby-comment">#   # =&gt; 1 person</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   pluralize(2, &#39;person&#39;)</span>
    <span class="ruby-comment">#   # =&gt; 2 people</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   pluralize(3, &#39;person&#39;, plural: &#39;users&#39;)</span>
    <span class="ruby-comment">#   # =&gt; 3 users</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   pluralize(0, &#39;person&#39;)</span>
    <span class="ruby-comment">#   # =&gt; 0 people</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   pluralize(2, &#39;Person&#39;, locale: :de)</span>
    <span class="ruby-comment">#   # =&gt; 2 Personen</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pluralize</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">singular</span>, <span class="ruby-identifier">plural_arg</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-value">plural:</span> <span class="ruby-identifier">plural_arg</span>, <span class="ruby-value">locale:</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">locale</span>)
      <span class="ruby-identifier">word</span> = <span class="ruby-keyword">if</span> (<span class="ruby-identifier">count</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^1(\.0+)?$/</span>)
        <span class="ruby-identifier">singular</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">plural</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">singular</span>.<span class="ruby-identifier">pluralize</span>(<span class="ruby-identifier">locale</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-node">&quot;#{count || 0} #{word}&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Wraps the +text+ into lines no longer than +line_width+ width. This method</span>
    <span class="ruby-comment"># breaks on the first whitespace character that does not exceed +line_width+</span>
    <span class="ruby-comment"># (which is 80 by default).</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   word_wrap(&#39;Once upon a time&#39;)</span>
    <span class="ruby-comment">#   # =&gt; Once upon a time</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   word_wrap(&#39;Once upon a time, in a kingdom called Far Far Away, a king fell ill, and finding a successor to the throne turned out to be more trouble than anyone could have imagined...&#39;)</span>
    <span class="ruby-comment">#   # =&gt; Once upon a time, in a kingdom called Far Far Away, a king fell ill, and finding\na successor to the throne turned out to be more trouble than anyone could have\nimagined...</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   word_wrap(&#39;Once upon a time&#39;, line_width: 8)</span>
    <span class="ruby-comment">#   # =&gt; Once\nupon a\ntime</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   word_wrap(&#39;Once upon a time&#39;, line_width: 1)</span>
    <span class="ruby-comment">#   # =&gt; Once\nupon\na\ntime</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   You can also specify a custom +break_sequence+ (&quot;\n&quot; by default)</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   word_wrap(&#39;Once upon a time&#39;, line_width: 1, break_sequence: &quot;\r\n&quot;)</span>
    <span class="ruby-comment">#   # =&gt; Once\r\nupon\r\na\r\ntime</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">word_wrap</span>(<span class="ruby-identifier">text</span>, <span class="ruby-value">line_width:</span> <span class="ruby-value">80</span>, <span class="ruby-value">break_sequence:</span> <span class="ruby-string">&quot;\n&quot;</span>)
      <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>).<span class="ruby-identifier">collect!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">line</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">line_width</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/(.{1,#{line_width}})(\s+|$)/</span>, <span class="ruby-node">&quot;\\1#{break_sequence}&quot;</span>).<span class="ruby-identifier">strip</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span>
      <span class="ruby-keyword">end</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">break_sequence</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Returns +text+ transformed into HTML using simple formatting rules.</span>
    <span class="ruby-comment"># Two or more consecutive newlines(&lt;tt&gt;\n\n&lt;/tt&gt; or &lt;tt&gt;\r\n\r\n&lt;/tt&gt;) are</span>
    <span class="ruby-comment"># considered a paragraph and wrapped in &lt;tt&gt;&lt;p&gt;&lt;/tt&gt; tags. One newline</span>
    <span class="ruby-comment"># (&lt;tt&gt;\n&lt;/tt&gt; or &lt;tt&gt;\r\n&lt;/tt&gt;) is considered a linebreak and a</span>
    <span class="ruby-comment"># &lt;tt&gt;&lt;br /&gt;&lt;/tt&gt; tag is appended. This method does not remove the</span>
    <span class="ruby-comment"># newlines from the +text+.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># You can pass any HTML attributes into &lt;tt&gt;html_options&lt;/tt&gt;. These</span>
    <span class="ruby-comment"># will be added to all created paragraphs.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># ==== Options</span>
    <span class="ruby-comment"># * &lt;tt&gt;:sanitize&lt;/tt&gt; - If +false+, does not sanitize +text+.</span>
    <span class="ruby-comment"># * &lt;tt&gt;:wrapper_tag&lt;/tt&gt; - String representing the wrapper tag, defaults to &lt;tt&gt;&quot;p&quot;&lt;/tt&gt;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># ==== Examples</span>
    <span class="ruby-comment">#   my_text = &quot;Here is some basic text...\n...with a line break.&quot;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   simple_format(my_text)</span>
    <span class="ruby-comment">#   # =&gt; &quot;&lt;p&gt;Here is some basic text...\n&lt;br /&gt;...with a line break.&lt;/p&gt;&quot;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   simple_format(my_text, {}, wrapper_tag: &quot;div&quot;)</span>
    <span class="ruby-comment">#   # =&gt; &quot;&lt;div&gt;Here is some basic text...\n&lt;br /&gt;...with a line break.&lt;/div&gt;&quot;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   more_text = &quot;We want to put a paragraph...\n\n...right there.&quot;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   simple_format(more_text)</span>
    <span class="ruby-comment">#   # =&gt; &quot;&lt;p&gt;We want to put a paragraph...&lt;/p&gt;\n\n&lt;p&gt;...right there.&lt;/p&gt;&quot;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   simple_format(&quot;Look ma! A class!&quot;, class: &#39;description&#39;)</span>
    <span class="ruby-comment">#   # =&gt; &quot;&lt;p class=&#39;description&#39;&gt;Look ma! A class!&lt;/p&gt;&quot;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   simple_format(&quot;&lt;blink&gt;Unblinkable.&lt;/blink&gt;&quot;)</span>
    <span class="ruby-comment">#   # =&gt; &quot;&lt;p&gt;Unblinkable.&lt;/p&gt;&quot;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   simple_format(&quot;&lt;blink&gt;Blinkable!&lt;/blink&gt; It&#39;s true.&quot;, {}, sanitize: false)</span>
    <span class="ruby-comment">#   # =&gt; &quot;&lt;p&gt;&lt;blink&gt;Blinkable!&lt;/blink&gt; It&#39;s true.&lt;/p&gt;&quot;</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">simple_format</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">html_options</span> = {}, <span class="ruby-identifier">options</span> = {})
      <span class="ruby-identifier">wrapper_tag</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:wrapper_tag</span>, <span class="ruby-value">:p</span>)

      <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">text</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:sanitize</span>, <span class="ruby-keyword">true</span>)
      <span class="ruby-identifier">paragraphs</span> = <span class="ruby-identifier">split_paragraphs</span>(<span class="ruby-identifier">text</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">paragraphs</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">wrapper_tag</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">html_options</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">paragraphs</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">paragraph</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">wrapper_tag</span>, <span class="ruby-identifier">raw</span>(<span class="ruby-identifier">paragraph</span>), <span class="ruby-identifier">html_options</span>)
        }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n\n&quot;</span>).<span class="ruby-identifier">html_safe</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Creates a Cycle object whose _to_s_ method cycles through elements of an</span>
    <span class="ruby-comment"># array every time it is called. This can be used for example, to alternate</span>
    <span class="ruby-comment"># classes for table rows. You can use named cycles to allow nesting in loops.</span>
    <span class="ruby-comment"># Passing a Hash as the last parameter with a &lt;tt&gt;:name&lt;/tt&gt; key will create a</span>
    <span class="ruby-comment"># named cycle. The default name for a cycle without a +:name+ key is</span>
    <span class="ruby-comment"># &lt;tt&gt;&quot;default&quot;&lt;/tt&gt;. You can manually reset a cycle by calling reset_cycle</span>
    <span class="ruby-comment"># and passing the name of the cycle. The current cycle string can be obtained</span>
    <span class="ruby-comment"># anytime using the current_cycle method.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   # Alternate CSS classes for even and odd numbers...</span>
    <span class="ruby-comment">#   @items = [1,2,3,4]</span>
    <span class="ruby-comment">#   &lt;table&gt;</span>
    <span class="ruby-comment">#   &lt;% @items.each do |item| %&gt;</span>
    <span class="ruby-comment">#     &lt;tr class=&quot;&lt;%= cycle(&quot;odd&quot;, &quot;even&quot;) -%&gt;&quot;&gt;</span>
    <span class="ruby-comment">#       &lt;td&gt;&lt;%= item %&gt;&lt;/td&gt;</span>
    <span class="ruby-comment">#     &lt;/tr&gt;</span>
    <span class="ruby-comment">#   &lt;% end %&gt;</span>
    <span class="ruby-comment">#   &lt;/table&gt;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   # Cycle CSS classes for rows, and text colors for values within each row</span>
    <span class="ruby-comment">#   @items = x = [{first: &#39;Robert&#39;, middle: &#39;Daniel&#39;, last: &#39;James&#39;},</span>
    <span class="ruby-comment">#                {first: &#39;Emily&#39;, middle: &#39;Shannon&#39;, maiden: &#39;Pike&#39;, last: &#39;Hicks&#39;},</span>
    <span class="ruby-comment">#               {first: &#39;June&#39;, middle: &#39;Dae&#39;, last: &#39;Jones&#39;}]</span>
    <span class="ruby-comment">#   &lt;% @items.each do |item| %&gt;</span>
    <span class="ruby-comment">#     &lt;tr class=&quot;&lt;%= cycle(&quot;odd&quot;, &quot;even&quot;, name: &quot;row_class&quot;) -%&gt;&quot;&gt;</span>
    <span class="ruby-comment">#       &lt;td&gt;</span>
    <span class="ruby-comment">#         &lt;% item.values.each do |value| %&gt;</span>
    <span class="ruby-comment">#           &lt;%# Create a named cycle &quot;colors&quot; %&gt;</span>
    <span class="ruby-comment">#           &lt;span style=&quot;color:&lt;%= cycle(&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, name: &quot;colors&quot;) -%&gt;&quot;&gt;</span>
    <span class="ruby-comment">#             &lt;%= value %&gt;</span>
    <span class="ruby-comment">#           &lt;/span&gt;</span>
    <span class="ruby-comment">#         &lt;% end %&gt;</span>
    <span class="ruby-comment">#         &lt;% reset_cycle(&quot;colors&quot;) %&gt;</span>
    <span class="ruby-comment">#       &lt;/td&gt;</span>
    <span class="ruby-comment">#    &lt;/tr&gt;</span>
    <span class="ruby-comment">#  &lt;% end %&gt;</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cycle</span>(<span class="ruby-identifier">first_value</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
      <span class="ruby-identifier">options</span> = <span class="ruby-identifier">values</span>.<span class="ruby-identifier">extract_options!</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:name</span>, <span class="ruby-string">&quot;default&quot;</span>)

      <span class="ruby-identifier">values</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">first_value</span>)

      <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">get_cycle</span>(<span class="ruby-identifier">name</span>)
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">cycle</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">values</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>
        <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">set_cycle</span>(<span class="ruby-identifier">name</span>, <span class="ruby-constant">Cycle</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>))
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Returns the current cycle string after a cycle has been started. Useful</span>
    <span class="ruby-comment"># for complex table highlighting or any other design need which requires</span>
    <span class="ruby-comment"># the current cycle string in more than one place.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   # Alternate background colors</span>
    <span class="ruby-comment">#   @items = [1,2,3,4]</span>
    <span class="ruby-comment">#   &lt;% @items.each do |item| %&gt;</span>
    <span class="ruby-comment">#     &lt;div style=&quot;background-color:&lt;%= cycle(&quot;red&quot;,&quot;white&quot;,&quot;blue&quot;) %&gt;&quot;&gt;</span>
    <span class="ruby-comment">#       &lt;span style=&quot;background-color:&lt;%= current_cycle %&gt;&quot;&gt;&lt;%= item %&gt;&lt;/span&gt;</span>
    <span class="ruby-comment">#     &lt;/div&gt;</span>
    <span class="ruby-comment">#   &lt;% end %&gt;</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">current_cycle</span>(<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;default&quot;</span>)
      <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">get_cycle</span>(<span class="ruby-identifier">name</span>)
      <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">current_value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cycle</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Resets a cycle so that it starts from the first element the next time</span>
    <span class="ruby-comment"># it is called. Pass in +name+ to reset a named cycle.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   # Alternate CSS classes for even and odd numbers...</span>
    <span class="ruby-comment">#   @items = [[1,2,3,4], [5,6,3], [3,4,5,6,7,4]]</span>
    <span class="ruby-comment">#   &lt;table&gt;</span>
    <span class="ruby-comment">#   &lt;% @items.each do |item| %&gt;</span>
    <span class="ruby-comment">#     &lt;tr class=&quot;&lt;%= cycle(&quot;even&quot;, &quot;odd&quot;) -%&gt;&quot;&gt;</span>
    <span class="ruby-comment">#         &lt;% item.each do |value| %&gt;</span>
    <span class="ruby-comment">#           &lt;span style=&quot;color:&lt;%= cycle(&quot;#333&quot;, &quot;#666&quot;, &quot;#999&quot;, name: &quot;colors&quot;) -%&gt;&quot;&gt;</span>
    <span class="ruby-comment">#             &lt;%= value %&gt;</span>
    <span class="ruby-comment">#           &lt;/span&gt;</span>
    <span class="ruby-comment">#         &lt;% end %&gt;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#         &lt;% reset_cycle(&quot;colors&quot;) %&gt;</span>
    <span class="ruby-comment">#     &lt;/tr&gt;</span>
    <span class="ruby-comment">#   &lt;% end %&gt;</span>
    <span class="ruby-comment">#   &lt;/table&gt;</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reset_cycle</span>(<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;default&quot;</span>)
      <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">get_cycle</span>(<span class="ruby-identifier">name</span>)
      <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">reset</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cycle</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">class</span> <span class="ruby-constant">Cycle</span> <span class="ruby-comment">#:nodoc:</span>
      <span class="ruby-identifier">attr_reader</span> <span class="ruby-value">:values</span>

      <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">first_value</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
        <span class="ruby-ivar">@values</span> = <span class="ruby-identifier">values</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">first_value</span>)
        <span class="ruby-identifier">reset</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reset</span>
        <span class="ruby-ivar">@index</span> = <span class="ruby-value">0</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">current_value</span>
        <span class="ruby-ivar">@values</span>[<span class="ruby-identifier">previous_index</span>].<span class="ruby-identifier">to_s</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_s</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@values</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">to_s</span>
        <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">next_index</span>
        <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">private</span>

        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">next_index</span>
          <span class="ruby-identifier">step_index</span>(<span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">previous_index</span>
          <span class="ruby-identifier">step_index</span>(<span class="ruby-value">-1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">step_index</span>(<span class="ruby-identifier">n</span>)
          (<span class="ruby-ivar">@index</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">n</span>) <span class="ruby-operator">%</span> <span class="ruby-ivar">@values</span>.<span class="ruby-identifier">size</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">private</span>
      <span class="ruby-comment"># The cycle helpers need to store the cycles in a place that is</span>
      <span class="ruby-comment"># guaranteed to be reset every time a page is rendered, so it</span>
      <span class="ruby-comment"># uses an instance variable of ActionView::Base.</span>
      <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_cycle</span>(<span class="ruby-identifier">name</span>)
        <span class="ruby-ivar">@_cycles</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@_cycles</span>)
        <span class="ruby-ivar">@_cycles</span>[<span class="ruby-identifier">name</span>]
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">set_cycle</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">cycle_object</span>)
        <span class="ruby-ivar">@_cycles</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@_cycles</span>)
        <span class="ruby-ivar">@_cycles</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">cycle_object</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">split_paragraphs</span>(<span class="ruby-identifier">text</span>)
        <span class="ruby-keyword">return</span> [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span>

        <span class="ruby-identifier">text</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r\n?/</span>, <span class="ruby-string">&quot;\n&quot;</span>).<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/\n\n+/</span>).<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">t</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/([^\n]\n)(?=[^\n])/</span>, <span class="ruby-string">&#39;\1&lt;br /&gt;&#39;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">t</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cut_excerpt_part</span>(<span class="ruby-identifier">part_position</span>, <span class="ruby-identifier">part</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">options</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-string">&quot;&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">part</span>

        <span class="ruby-identifier">radius</span>   = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:radius</span>, <span class="ruby-value">100</span>)
        <span class="ruby-identifier">omission</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:omission</span>, <span class="ruby-string">&quot;...&quot;</span>)

        <span class="ruby-identifier">part</span> = <span class="ruby-identifier">part</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">separator</span>)
        <span class="ruby-identifier">part</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;&quot;</span>)
        <span class="ruby-identifier">affix</span> = <span class="ruby-identifier">part</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">radius</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">omission</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;&quot;</span>

        <span class="ruby-identifier">part</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">part_position</span> <span class="ruby-operator">==</span> <span class="ruby-value">:first</span>
          <span class="ruby-identifier">drop_index</span> = [<span class="ruby-identifier">part</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">radius</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">max</span>
          <span class="ruby-identifier">part</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-identifier">drop_index</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">part</span>.<span class="ruby-identifier">first</span>(<span class="ruby-identifier">radius</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">return</span> <span class="ruby-identifier">affix</span>, <span class="ruby-identifier">part</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">separator</span>)
      <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-get_cycle">
            
              <b>get_cycle</b>(name)
            
            <a href="TextHelper.html#method-i-get_cycle" name="method-i-get_cycle" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>The cycle helpers need to store the cycles in a place that is guaranteed to
be reset every time a page is rendered, so it uses an instance variable of
<a href="../Base.html">ActionView::Base</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-get_cycle_source')" id="l_method-i-get_cycle_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L447" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-get_cycle_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 447</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_cycle</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@_cycles</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@_cycles</span>)
  <span class="ruby-ivar">@_cycles</span>[<span class="ruby-identifier">name</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-highlight">
            
              <b>highlight</b>(text, phrases, options = {})
            
            <a href="TextHelper.html#method-i-highlight" name="method-i-highlight" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Highlights one or more <code>phrases</code> everywhere in <code>text</code>
by inserting it into a <code>:highlighter</code> string. The highlighter
can be specialized by passing <code>:highlighter</code> as a single-quoted
string with <code>\1</code> where the phrase is to be inserted (defaults to
&#39;&lt;mark&gt;1&lt;/mark&gt;&#39;) or passing a block that receives each
matched term. By default <code>text</code> is sanitized to prevent possible
XSS attacks. If the input is trustworthy, passing false for
<code>:sanitize</code> will turn sanitizing off.</p>

<pre><code>highlight(&#39;You searched for: rails&#39;, &#39;rails&#39;)
# =&gt; You searched for: &lt;mark&gt;rails&lt;/mark&gt;

highlight(&#39;You searched for: rails&#39;, /for|rails/)
# =&gt; You searched &lt;mark&gt;for&lt;/mark&gt;: &lt;mark&gt;rails&lt;/mark&gt;

highlight(&#39;You searched for: ruby, rails, dhh&#39;, &#39;actionpack&#39;)
# =&gt; You searched for: ruby, rails, dhh

highlight(&#39;You searched for: rails&#39;, [&#39;for&#39;, &#39;rails&#39;], highlighter: &#39;&lt;em&gt;\1&lt;/em&gt;&#39;)
# =&gt; You searched &lt;em&gt;for&lt;/em&gt;: &lt;em&gt;rails&lt;/em&gt;

highlight(&#39;You searched for: rails&#39;, &#39;rails&#39;, highlighter: &#39;&lt;a href=&quot;search?q=\1&quot;&gt;\1&lt;/a&gt;&#39;)
# =&gt; You searched for: &lt;a href=&quot;search?q=rails&quot;&gt;rails&lt;/a&gt;

highlight(&#39;You searched for: rails&#39;, &#39;rails&#39;) { |match| link_to(search_path(q: match, match)) }
# =&gt; You searched for: &lt;a href=&quot;search?q=rails&quot;&gt;rails&lt;/a&gt;

highlight(&#39;&lt;a href=&quot;javascript:alert(\&#39;no!\&#39;)&quot;&gt;ruby&lt;/a&gt; on rails&#39;, &#39;rails&#39;, sanitize: false)
# =&gt; &lt;a href=&quot;javascript:alert(&#39;no!&#39;)&quot;&gt;ruby&lt;/a&gt; on &lt;mark&gt;rails&lt;/mark&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-highlight_source')" id="l_method-i-highlight_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L132" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-highlight_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">highlight</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">phrases</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">text</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:sanitize</span>, <span class="ruby-keyword">true</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">phrases</span>.<span class="ruby-identifier">blank?</span>
    <span class="ruby-identifier">text</span> <span class="ruby-operator">||</span> <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">match</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">phrases</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
      <span class="ruby-constant">Regexp</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">p</span>)
    <span class="ruby-keyword">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;|&quot;</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
      <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/(#{match})(?![^&lt;]*?&gt;)/i</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">found</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">found</span> }
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">highlighter</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:highlighter</span>, <span class="ruby-string">&#39;&lt;mark&gt;\1&lt;/mark&gt;&#39;</span>)
      <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/(#{match})(?![^&lt;]*?&gt;)/i</span>, <span class="ruby-identifier">highlighter</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">html_safe</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-pluralize">
            
              <b>pluralize</b>(count, singular, plural_arg = nil, plural: plural_arg, locale: I18n.locale)
            
            <a href="TextHelper.html#method-i-pluralize" name="method-i-pluralize" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Attempts to pluralize the <code>singular</code> word unless
<code>count</code> is 1. If <code>plural</code> is supplied, it will use
that when count is &gt; 1, otherwise it will use the Inflector to determine
the plural form for the given locale, which defaults to I18n.locale</p>

<p>The word will be pluralized using rules defined for the locale (you must
define your own inflection rules for languages other than English). See <a
href="../../ActiveSupport/Inflector.html#method-i-pluralize">ActiveSupport::Inflector#pluralize</a></p>

<pre><code>pluralize(1, &#39;person&#39;)
# =&gt; 1 person

pluralize(2, &#39;person&#39;)
# =&gt; 2 people

pluralize(3, &#39;person&#39;, plural: &#39;users&#39;)
# =&gt; 3 users

pluralize(0, &#39;person&#39;)
# =&gt; 0 people

pluralize(2, &#39;Person&#39;, locale: :de)
# =&gt; 2 Personen
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-pluralize_source')" id="l_method-i-pluralize_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L230" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-pluralize_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 230</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pluralize</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">singular</span>, <span class="ruby-identifier">plural_arg</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-value">plural:</span> <span class="ruby-identifier">plural_arg</span>, <span class="ruby-value">locale:</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">locale</span>)
  <span class="ruby-identifier">word</span> = <span class="ruby-keyword">if</span> (<span class="ruby-identifier">count</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^1(\.0+)?$/</span>)
    <span class="ruby-identifier">singular</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">plural</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">singular</span>.<span class="ruby-identifier">pluralize</span>(<span class="ruby-identifier">locale</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-node">&quot;#{count || 0} #{word}&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-reset_cycle">
            
              <b>reset_cycle</b>(name = &quot;default&quot;)
            
            <a href="TextHelper.html#method-i-reset_cycle" name="method-i-reset_cycle" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Resets a cycle so that it starts from the first element the next time it is
called. Pass in <code>name</code> to reset a named cycle.</p>

<pre><code># Alternate CSS classes for even and odd numbers...
@items = [[1,2,3,4], [5,6,3], [3,4,5,6,7,4]]
&lt;table&gt;
&lt;% @items.each do |item| %&gt;
  &lt;tr class=&quot;&lt;%= cycle(&quot;even&quot;, &quot;odd&quot;) -%&gt;&quot;&gt;
      &lt;% item.each do |value| %&gt;
        &lt;span style=&quot;color:&lt;%= cycle(&quot;#333&quot;, &quot;#666&quot;, &quot;#999&quot;, name: &quot;colors&quot;) -%&gt;&quot;&gt;
          &lt;%= value %&gt;
        &lt;/span&gt;
      &lt;% end %&gt;

      &lt;% reset_cycle(&quot;colors&quot;) %&gt;
  &lt;/tr&gt;
&lt;% end %&gt;
&lt;/table&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-reset_cycle_source')" id="l_method-i-reset_cycle_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L401" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-reset_cycle_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 401</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reset_cycle</span>(<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;default&quot;</span>)
  <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">get_cycle</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">reset</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cycle</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-safe_concat">
            
              <b>safe_concat</b>(string)
            
            <a href="TextHelper.html#method-i-safe_concat" name="method-i-safe_concat" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-safe_concat_source')" id="l_method-i-safe_concat_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L58" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-safe_concat_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">safe_concat</span>(<span class="ruby-identifier">string</span>)
  <span class="ruby-identifier">output_buffer</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:safe_concat</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">output_buffer</span>.<span class="ruby-identifier">safe_concat</span>(<span class="ruby-identifier">string</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">string</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-set_cycle">
            
              <b>set_cycle</b>(name, cycle_object)
            
            <a href="TextHelper.html#method-i-set_cycle" name="method-i-set_cycle" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-set_cycle_source')" id="l_method-i-set_cycle_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L452" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-set_cycle_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 452</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">set_cycle</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">cycle_object</span>)
  <span class="ruby-ivar">@_cycles</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@_cycles</span>)
  <span class="ruby-ivar">@_cycles</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">cycle_object</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-simple_format">
            
              <b>simple_format</b>(text, html_options = {}, options = {})
            
            <a href="TextHelper.html#method-i-simple_format" name="method-i-simple_format" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns <code>text</code> transformed into HTML using simple formatting
rules. Two or more consecutive newlines(<code>\n\n</code> or
<code>\r\n\r\n</code>) are considered a paragraph and wrapped in
<code>&lt;p&gt;</code> tags. One newline (<code>\n</code> or
<code>\r\n</code>) is considered a linebreak and a <code>&lt;br
/&gt;</code> tag is appended. This method does not remove the newlines from
the <code>text</code>.</p>

<p>You can pass any HTML attributes into <code>html_options</code>. These will
be added to all created paragraphs.</p>

<h4 id="method-i-simple_format-label-Options">Options</h4>
<ul><li>
<p><code>:sanitize</code> - If <code>false</code>, does not sanitize
<code>text</code>.</p>
</li><li>
<p><code>:wrapper_tag</code> - <a href="../../String.html">String</a>
representing the wrapper tag, defaults to <code>&quot;p&quot;</code></p>
</li></ul>

<h4 id="method-i-simple_format-label-Examples">Examples</h4>

<pre><code>my_text = &quot;Here is some basic text...\n...with a line break.&quot;

simple_format(my_text)
# =&gt; &quot;&lt;p&gt;Here is some basic text...\n&lt;br /&gt;...with a line break.&lt;/p&gt;&quot;

simple_format(my_text, {}, wrapper_tag: &quot;div&quot;)
# =&gt; &quot;&lt;div&gt;Here is some basic text...\n&lt;br /&gt;...with a line break.&lt;/div&gt;&quot;

more_text = &quot;We want to put a paragraph...\n\n...right there.&quot;

simple_format(more_text)
# =&gt; &quot;&lt;p&gt;We want to put a paragraph...&lt;/p&gt;\n\n&lt;p&gt;...right there.&lt;/p&gt;&quot;

simple_format(&quot;Look ma! A class!&quot;, class: &#39;description&#39;)
# =&gt; &quot;&lt;p class=&#39;description&#39;&gt;Look ma! A class!&lt;/p&gt;&quot;

simple_format(&quot;&lt;blink&gt;Unblinkable.&lt;/blink&gt;&quot;)
# =&gt; &quot;&lt;p&gt;Unblinkable.&lt;/p&gt;&quot;

simple_format(&quot;&lt;blink&gt;Blinkable!&lt;/blink&gt; It&#39;s true.&quot;, {}, sanitize: false)
# =&gt; &quot;&lt;p&gt;&lt;blink&gt;Blinkable!&lt;/blink&gt; It&#39;s true.&lt;/p&gt;&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-simple_format_source')" id="l_method-i-simple_format_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L302" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-simple_format_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 302</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">simple_format</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">html_options</span> = {}, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">wrapper_tag</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:wrapper_tag</span>, <span class="ruby-value">:p</span>)

  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">text</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:sanitize</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">paragraphs</span> = <span class="ruby-identifier">split_paragraphs</span>(<span class="ruby-identifier">text</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">paragraphs</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">wrapper_tag</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">html_options</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">paragraphs</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">paragraph</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">wrapper_tag</span>, <span class="ruby-identifier">raw</span>(<span class="ruby-identifier">paragraph</span>), <span class="ruby-identifier">html_options</span>)
    }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n\n&quot;</span>).<span class="ruby-identifier">html_safe</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-split_paragraphs">
            
              <b>split_paragraphs</b>(text)
            
            <a href="TextHelper.html#method-i-split_paragraphs" name="method-i-split_paragraphs" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-split_paragraphs_source')" id="l_method-i-split_paragraphs_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L457" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-split_paragraphs_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 457</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">split_paragraphs</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">return</span> [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span>

  <span class="ruby-identifier">text</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r\n?/</span>, <span class="ruby-string">&quot;\n&quot;</span>).<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/\n\n+/</span>).<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">t</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/([^\n]\n)(?=[^\n])/</span>, <span class="ruby-string">&#39;\1&lt;br /&gt;&#39;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">t</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-truncate">
            
              <b>truncate</b>(text, options = {}, &amp;block)
            
            <a href="TextHelper.html#method-i-truncate" name="method-i-truncate" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Truncates a given <code>text</code> after a given <code>:length</code> if
<code>text</code> is longer than <code>:length</code> (defaults to 30). The
last characters will be replaced with the <code>:omission</code> (defaults
to “…”) for a total length not exceeding <code>:length</code>.</p>

<p>Pass a <code>:separator</code> to truncate <code>text</code> at a natural
break.</p>

<p>Pass a block if you want to show extra content when the text is truncated.</p>

<p>The result is marked as HTML-safe, but it is escaped by default, unless
<code>:escape</code> is <code>false</code>. Care should be taken if
<code>text</code> contains HTML tags or entities, because truncation may
produce invalid HTML (such as unbalanced or incomplete tags).</p>

<pre><code>truncate(&quot;Once upon a time in a world far far away&quot;)
# =&gt; &quot;Once upon a time in a world...&quot;

truncate(&quot;Once upon a time in a world far far away&quot;, length: 17)
# =&gt; &quot;Once upon a ti...&quot;

truncate(&quot;Once upon a time in a world far far away&quot;, length: 17, separator: &#39; &#39;)
# =&gt; &quot;Once upon a...&quot;

truncate(&quot;And they found that many people were sleeping better.&quot;, length: 25, omission: &#39;... (continued)&#39;)
# =&gt; &quot;And they f... (continued)&quot;

truncate(&quot;&lt;p&gt;Once upon a time in a world far far away&lt;/p&gt;&quot;)
# =&gt; &quot;&amp;lt;p&amp;gt;Once upon a time in a wo...&quot;

truncate(&quot;&lt;p&gt;Once upon a time in a world far far away&lt;/p&gt;&quot;, escape: false)
# =&gt; &quot;&lt;p&gt;Once upon a time in a wo...&quot;

truncate(&quot;Once upon a time in a world far far away&quot;) { link_to &quot;Continue&quot;, &quot;#&quot; }
# =&gt; &quot;Once upon a time in a wo...&lt;a href=&quot;#&quot;&gt;Continue&lt;/a&gt;&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-truncate_source')" id="l_method-i-truncate_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L94" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-truncate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">truncate</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>
    <span class="ruby-identifier">length</span>  = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:length</span>, <span class="ruby-value">30</span>)

    <span class="ruby-identifier">content</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">truncate</span>(<span class="ruby-identifier">length</span>, <span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">content</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:escape</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">html_safe</span> <span class="ruby-operator">:</span> <span class="ruby-constant">ERB</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">html_escape</span>(<span class="ruby-identifier">content</span>)
    <span class="ruby-identifier">content</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">length</span>
    <span class="ruby-identifier">content</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-word_wrap">
            
              <b>word_wrap</b>(text, line_width: 80, break_sequence: &quot;\n&quot;)
            
            <a href="TextHelper.html#method-i-word_wrap" name="method-i-word_wrap" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Wraps the <code>text</code> into lines no longer than
<code>line_width</code> width. This method breaks on the first whitespace
character that does not exceed <code>line_width</code> (which is 80 by
default).</p>

<pre><code>word_wrap(&#39;Once upon a time&#39;)
# =&gt; Once upon a time

word_wrap(&#39;Once upon a time, in a kingdom called Far Far Away, a king fell ill, and finding a successor to the throne turned out to be more trouble than anyone could have imagined...&#39;)
# =&gt; Once upon a time, in a kingdom called Far Far Away, a king fell ill, and finding\na successor to the throne turned out to be more trouble than anyone could have\nimagined...

word_wrap(&#39;Once upon a time&#39;, line_width: 8)
# =&gt; Once\nupon a\ntime

word_wrap(&#39;Once upon a time&#39;, line_width: 1)
# =&gt; Once\nupon\na\ntime

You can also specify a custom +break_sequence+ (&quot;\n&quot; by default)

word_wrap(&#39;Once upon a time&#39;, line_width: 1, break_sequence: &quot;\r\n&quot;)
# =&gt; Once\r\nupon\r\na\r\ntime
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-word_wrap_source')" id="l_method-i-word_wrap_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionview/lib/action_view/helpers/text_helper.rb#L260" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-word_wrap_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionview/lib/action_view/helpers/text_helper.rb, line 260</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">word_wrap</span>(<span class="ruby-identifier">text</span>, <span class="ruby-value">line_width:</span> <span class="ruby-value">80</span>, <span class="ruby-value">break_sequence:</span> <span class="ruby-string">&quot;\n&quot;</span>)
  <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>).<span class="ruby-identifier">collect!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">line</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">line_width</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/(.{1,#{line_width}})(\s+|$)/</span>, <span class="ruby-node">&quot;\\1#{break_sequence}&quot;</span>).<span class="ruby-identifier">strip</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span>
  <span class="ruby-keyword">end</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">break_sequence</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
  </body>
</html>
