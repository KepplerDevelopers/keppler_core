<!DOCTYPE html>
<html lang="en">
<head>
    <title>ActiveRecord::AttributeMethods::ClassMethods</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="https://api.rubyonrails.org/css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="https://api.rubyonrails.org/css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="https://api.rubyonrails.org/css/github.css" type="text/css" media="screen" />
<script src="https://api.rubyonrails.org/js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://api.rubyonrails.org/js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="https://api.rubyonrails.org/js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>


    <meta property="og:title" value="ActiveRecord::AttributeMethods::ClassMethods">

  

    <meta name="keywords" content="ActiveRecord::AttributeMethods::ClassMethods class">
  
    <meta name="keywords" content="instance_method_already_implemented?, dangerous_class_method?, attribute_method?, attribute_names, has_attribute?, column_for_attribute, respond_to?, attributes, attribute_for_inspect, attribute_present?, [], []=, accessed_fields">
  
</head>

<body>
    <div class="banner">
        
            <span>Ruby on Rails 5.2.1</span><br />
        
        <h1>
            <span class="type">Module</span>
            ActiveRecord::AttributeMethods::ClassMethods
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/activerecord/lib/active_record/attribute_methods_rb.html">activerecord/lib/active_record/attribute_methods.rb</a></li>
            
            <li><a href="../../../files/activerecord/lib/active_record/relation/query_methods_rb.html">activerecord/lib/active_record/relation/query_methods.rb</a></li>
            
            <li><a href="../../../files/activerecord/lib/active_record/sanitization_rb.html">activerecord/lib/active_record/sanitization.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>#</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="ClassMethods.html#method-i-5B-5D">[]</a>,
              </li>
            
              
              <li>
                <a href="ClassMethods.html#method-i-5B-5D-3D">[]=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="ClassMethods.html#method-i-accessed_fields">accessed_fields</a>,
              </li>
            
              
              <li>
                <a href="ClassMethods.html#method-i-attribute_for_inspect">attribute_for_inspect</a>,
              </li>
            
              
              <li>
                <a href="ClassMethods.html#method-i-attribute_method-3F">attribute_method?</a>,
              </li>
            
              
              <li>
                <a href="ClassMethods.html#method-i-attribute_names">attribute_names</a>,
              </li>
            
              
              <li>
                <a href="ClassMethods.html#method-i-attribute_present-3F">attribute_present?</a>,
              </li>
            
              
              <li>
                <a href="ClassMethods.html#method-i-attributes">attributes</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="ClassMethods.html#method-i-column_for_attribute">column_for_attribute</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="ClassMethods.html#method-i-dangerous_class_method-3F">dangerous_class_method?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="ClassMethods.html#method-i-has_attribute-3F">has_attribute?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="ClassMethods.html#method-i-instance_method_already_implemented-3F">instance_method_already_implemented?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="ClassMethods.html#method-i-respond_to-3F">respond_to?</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">COLUMN_NAME_ORDER_WHITELIST</td>
            <td>=</td>
            <td class="attr-value">/
\A
(?:\w+\.)?
\w+
(?:\s+asc|\s+desc)?
(?:\s+nulls\s+(?:first|last))?
\z
/ix</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Regexp whitelist. Matches the following:</p>

<pre><code>&quot;#{table_name}.#{column_name}&quot;
&quot;#{table_name}.#{column_name} #{direction}&quot;
&quot;#{table_name}.#{column_name} #{direction} NULLS FIRST&quot;
&quot;#{table_name}.#{column_name} NULLS LAST&quot;
&quot;#{column_name}&quot;
&quot;#{column_name} #{direction}&quot;
&quot;#{column_name} #{direction} NULLS FIRST&quot;
&quot;#{column_name} NULLS LAST&quot;
</code></pre></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">COLUMN_NAME_WHITELIST</td>
            <td>=</td>
            <td class="attr-value">/\A(?:\w+\.)?\w+\z/i</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Regexp whitelist. Matches the following:</p>

<pre><code>&quot;#{table_name}.#{column_name}&quot;
&quot;#{column_name}&quot;
</code></pre></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
    
    
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-5B-5D">
            
              <b>[]</b>(attr_name)
            
            <a href="ClassMethods.html#method-i-5B-5D" name="method-i-5B-5D" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns the value of the attribute identified by <code>attr_name</code>
after it has been typecast (for example, “2004-12-12” in a date column is
cast to a date object, like Date.new(2004, 12, 12)). It raises
<code>ActiveModel::MissingAttributeError</code> if the identified attribute
is missing.</p>

<p>Note: <code>:id</code> is always present.</p>

<pre><code>class Person &lt; ActiveRecord::Base
  belongs_to :organization
end

person = Person.new(name: &#39;Francesco&#39;, age: &#39;22&#39;)
person[:name] # =&gt; &quot;Francesco&quot;
person[:age]  # =&gt; 22

person = Person.select(&#39;id&#39;).first
person[:name]            # =&gt; ActiveModel::MissingAttributeError: missing attribute: name
person[:organization_id] # =&gt; ActiveModel::MissingAttributeError: missing attribute: organization_id
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-5B-5D_source')" id="l_method-i-5B-5D_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L395" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-5B-5D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 395</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">[]</span>(<span class="ruby-identifier">attr_name</span>)
  <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">missing_attribute</span>(<span class="ruby-identifier">n</span>, <span class="ruby-identifier">caller</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-5B-5D-3D">
            
              <b>[]=</b>(attr_name, value)
            
            <a href="ClassMethods.html#method-i-5B-5D-3D" name="method-i-5B-5D-3D" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Updates the attribute identified by <code>attr_name</code> with the
specified <code>value</code>. (Alias for the protected write_attribute
method).</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

person = Person.new
person[:age] = &#39;22&#39;
person[:age] # =&gt; 22
person[:age].class # =&gt; Integer
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-5B-5D-3D_source')" id="l_method-i-5B-5D-3D_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L409" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-5B-5D-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 409</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">[]=</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-accessed_fields">
            
              <b>accessed_fields</b>()
            
            <a href="ClassMethods.html#method-i-accessed_fields" name="method-i-accessed_fields" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns the name of all database fields which have been read from this
model. This can be useful in development mode to determine which fields
need to be selected. For performance critical pages, selecting only the
required fields can be an easy performance win (assuming you aren&#39;t
using all of the fields on the model).</p>

<p>For example:</p>

<pre><code>class PostsController &lt; ActionController::Base
  after_action :print_accessed_fields, only: :index

  def index
    @posts = Post.all
  end

  private

  def print_accessed_fields
    p @posts.first.accessed_fields
  end
end
</code></pre>

<p>Which allows you to quickly change your code to:</p>

<pre><code>class PostsController &lt; ActionController::Base
  def index
    @posts = Post.select(:id, :title, :author_id, :updated_at)
  end
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-accessed_fields_source')" id="l_method-i-accessed_fields_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L442" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-accessed_fields_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 442</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">accessed_fields</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">accessed</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-attribute_for_inspect">
            
              <b>attribute_for_inspect</b>(attr_name)
            
            <a href="ClassMethods.html#method-i-attribute_for_inspect" name="method-i-attribute_for_inspect" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns an <code>#inspect</code>-like string for the value of the attribute
<code>attr_name</code>. <a href="../../String.html">String</a> attributes
are truncated up to 50 characters, <a href="../../Date.html">Date</a> and
<a href="../../Time.html">Time</a> attributes are returned in the
<code>:db</code> format. Other attributes return the value of
<code>#inspect</code> without modification.</p>

<pre><code>person = Person.create!(name: &#39;David Heinemeier Hansson &#39; * 3)

person.attribute_for_inspect(:name)
# =&gt; &quot;\&quot;David Heinemeier Hansson David Heinemeier Hansson ...\&quot;&quot;

person.attribute_for_inspect(:created_at)
# =&gt; &quot;\&quot;2012-10-22 00:15:07\&quot;&quot;

person.attribute_for_inspect(:tag_ids)
# =&gt; &quot;[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-attribute_for_inspect_source')" id="l_method-i-attribute_for_inspect_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L346" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-attribute_for_inspect_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 346</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attribute_for_inspect</span>(<span class="ruby-identifier">attr_name</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">50</span>
    <span class="ruby-node">&quot;#{value[0, 50]}...&quot;</span>.<span class="ruby-identifier">inspect</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Date</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Time</span>)
    <span class="ruby-node">%(&quot;#{value.to_s(:db)}&quot;)</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">value</span>.<span class="ruby-identifier">inspect</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-attribute_method-3F">
            
              <b>attribute_method?</b>(attribute)
            
            <a href="ClassMethods.html#method-i-attribute_method-3F" name="method-i-attribute_method-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>attribute</code> is an attribute method
and table exists, <code>false</code> otherwise.</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

Person.attribute_method?(&#39;name&#39;)   # =&gt; true
Person.attribute_method?(:age=)    # =&gt; true
Person.attribute_method?(:nothing) # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-attribute_method-3F_source')" id="l_method-i-attribute_method-3F_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L150" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-attribute_method-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attribute_method?</span>(<span class="ruby-identifier">attribute</span>)
  <span class="ruby-keyword">super</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">table_exists?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/=$/</span>, <span class="ruby-string">&quot;&quot;</span>)))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-attribute_names">
            
              <b>attribute_names</b>()
            
            <a href="ClassMethods.html#method-i-attribute_names" name="method-i-attribute_names" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns an array of column names as strings if it&#39;s not an abstract
class and table exists. Otherwise it returns an empty array.</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

Person.attribute_names
# =&gt; [&quot;id&quot;, &quot;created_at&quot;, &quot;updated_at&quot;, &quot;name&quot;, &quot;age&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-attribute_names_source')" id="l_method-i-attribute_names_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L162" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-attribute_names_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attribute_names</span>
  <span class="ruby-ivar">@attribute_names</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">abstract_class?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">table_exists?</span>
    <span class="ruby-identifier">attribute_types</span>.<span class="ruby-identifier">keys</span>
  <span class="ruby-keyword">else</span>
    []
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-attribute_present-3F">
            
              <b>attribute_present?</b>(attribute)
            
            <a href="ClassMethods.html#method-i-attribute_present-3F" name="method-i-attribute_present-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns <code>true</code> if the specified <code>attribute</code> has been
set by the user or by a database load and is neither <code>nil</code> nor
<code>empty?</code> (the latter only applies to objects that respond to
<code>empty?</code>, most notably Strings). Otherwise, <code>false</code>.
Note that it always returns <code>true</code> with boolean attributes.</p>

<pre><code>class Task &lt; ActiveRecord::Base
end

task = Task.new(title: &#39;&#39;, is_done: false)
task.attribute_present?(:title)   # =&gt; false
task.attribute_present?(:is_done) # =&gt; true
task.title = &#39;Buy milk&#39;
task.is_done = true
task.attribute_present?(:title)   # =&gt; true
task.attribute_present?(:is_done) # =&gt; true
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-attribute_present-3F_source')" id="l_method-i-attribute_present-3F_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L373" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-attribute_present-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 373</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attribute_present?</span>(<span class="ruby-identifier">attribute</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">_read_attribute</span>(<span class="ruby-identifier">attribute</span>)
  <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:empty?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-attributes">
            
              <b>attributes</b>()
            
            <a href="ClassMethods.html#method-i-attributes" name="method-i-attributes" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns a hash of all the attributes with their names as keys and the
values of the attributes as values.</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

person = Person.create(name: &#39;Francesco&#39;, age: 22)
person.attributes
# =&gt; {&quot;id&quot;=&gt;3, &quot;created_at&quot;=&gt;Sun, 21 Oct 2012 04:53:04, &quot;updated_at&quot;=&gt;Sun, 21 Oct 2012 04:53:04, &quot;name&quot;=&gt;&quot;Francesco&quot;, &quot;age&quot;=&gt;22}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-attributes_source')" id="l_method-i-attributes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L326" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 326</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attributes</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">to_hash</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-column_for_attribute">
            
              <b>column_for_attribute</b>(name)
            
            <a href="ClassMethods.html#method-i-column_for_attribute" name="method-i-column_for_attribute" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns the column object for the named attribute. Returns a
<code>ActiveRecord::ConnectionAdapters::NullColumn</code> if the named
attribute does not exist.</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

person = Person.new
person.column_for_attribute(:name) # the result depends on the ConnectionAdapter
# =&gt; #&lt;ActiveRecord::ConnectionAdapters::Column:0x007ff4ab083980 @name=&quot;name&quot;, @sql_type=&quot;varchar(255)&quot;, @null=true, ...&gt;

person.column_for_attribute(:nothing)
# =&gt; #&lt;ActiveRecord::ConnectionAdapters::NullColumn:0xXXX @name=nil, @sql_type=nil, @cast_type=#&lt;Type::Value&gt;, ...&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-column_for_attribute_source')" id="l_method-i-column_for_attribute_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L246" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-column_for_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">column_for_attribute</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">columns_hash</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">name</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">ConnectionAdapters</span><span class="ruby-operator">::</span><span class="ruby-constant">NullColumn</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-dangerous_class_method-3F">
            
              <b>dangerous_class_method?</b>(method_name)
            
            <a href="ClassMethods.html#method-i-dangerous_class_method-3F" name="method-i-dangerous_class_method-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>A class method is &#39;dangerous&#39; if it is already (re)defined by
Active Record, but not by any ancestors. (So &#39;puts&#39; is not
dangerous but &#39;new&#39; is.)</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-dangerous_class_method-3F_source')" id="l_method-i-dangerous_class_method-3F_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L125" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-dangerous_class_method-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 125</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dangerous_class_method?</span>(<span class="ruby-identifier">method_name</span>)
  <span class="ruby-constant">BLACKLISTED_CLASS_METHODS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">method_name</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">class_method_defined_within?</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-constant">Base</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-has_attribute-3F">
            
              <b>has_attribute?</b>(attr_name)
            
            <a href="ClassMethods.html#method-i-has_attribute-3F" name="method-i-has_attribute-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns true if the given attribute exists, otherwise false.</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

Person.has_attribute?(&#39;name&#39;)   # =&gt; true
Person.has_attribute?(:age)     # =&gt; true
Person.has_attribute?(:nothing) # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-has_attribute-3F_source')" id="l_method-i-has_attribute-3F_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L229" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-has_attribute-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">has_attribute?</span>(<span class="ruby-identifier">attr_name</span>)
  <span class="ruby-identifier">attribute_types</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-instance_method_already_implemented-3F">
            
              <b>instance_method_already_implemented?</b>(method_name)
            
            <a href="ClassMethods.html#method-i-instance_method_already_implemented-3F" name="method-i-instance_method_already_implemented-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Raises an <a
href="../DangerousAttributeError.html">ActiveRecord::DangerousAttributeError</a>
exception when an Active Record method is defined in the model, otherwise
<code>false</code>.</p>

<pre><code>class Person &lt; ActiveRecord::Base
  def save
    &#39;already defined by Active Record&#39;
  end
end

Person.instance_method_already_implemented?(:save)
# =&gt; ActiveRecord::DangerousAttributeError: save is defined by Active Record. Check to make sure that you don&#39;t have an attribute or method with the same name.

Person.instance_method_already_implemented?(:name)
# =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-instance_method_already_implemented-3F_source')" id="l_method-i-instance_method_already_implemented-3F_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L89" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-instance_method_already_implemented-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">instance_method_already_implemented?</span>(<span class="ruby-identifier">method_name</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dangerous_attribute_method?</span>(<span class="ruby-identifier">method_name</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">DangerousAttributeError</span>, <span class="ruby-node">&quot;#{method_name} is defined by Active Record. Check to make sure that you don&#39;t have an attribute or method with the same name.&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># If ThisClass &lt; ... &lt; SomeSuperClass &lt; ... &lt; Base and SomeSuperClass</span>
    <span class="ruby-comment"># defines its own attribute method, then we don&#39;t want to overwrite that.</span>
    <span class="ruby-identifier">defined</span> = <span class="ruby-identifier">method_defined_within?</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-identifier">superclass</span>, <span class="ruby-constant">Base</span>) <span class="ruby-operator">&amp;&amp;</span>
      <span class="ruby-operator">!</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">instance_method</span>(<span class="ruby-identifier">method_name</span>).<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">GeneratedAttributeMethods</span>)
    <span class="ruby-identifier">defined</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-respond_to-3F">
            
              <b>respond_to?</b>(name, include_private = false)
            
            <a href="ClassMethods.html#method-i-respond_to-3F" name="method-i-respond_to-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>A Person object with a name attribute can ask
<code>person.respond_to?(:name)</code>,
<code>person.respond_to?(:name=)</code>, and
<code>person.respond_to?(:name?)</code> which will all return
<code>true</code>. It also defines the attribute methods if they have not
been generated.</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

person = Person.new
person.respond_to?(:name)    # =&gt; true
person.respond_to?(:name=)   # =&gt; true
person.respond_to?(:name?)   # =&gt; true
person.respond_to?(&#39;age&#39;)    # =&gt; true
person.respond_to?(&#39;age=&#39;)   # =&gt; true
person.respond_to?(&#39;age?&#39;)   # =&gt; true
person.respond_to?(:nothing) # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-respond_to-3F_source')" id="l_method-i-respond_to-3F_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/attribute_methods.rb#L270" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-respond_to-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 270</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">respond_to?</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">include_private</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">super</span>

  <span class="ruby-keyword">case</span> <span class="ruby-identifier">name</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:to_partial_path</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;to_partial_path&quot;</span>.<span class="ruby-identifier">freeze</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:to_model</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;to_model&quot;</span>.<span class="ruby-identifier">freeze</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># If the result is true then check for the select case.</span>
  <span class="ruby-comment"># For queries selecting a subset of columns, return false for unselected columns.</span>
  <span class="ruby-comment"># We check defined?(@attributes) not to issue warnings if called on objects that</span>
  <span class="ruby-comment"># have been allocated but not yet initialized.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@attributes</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
  </body>
</html>
