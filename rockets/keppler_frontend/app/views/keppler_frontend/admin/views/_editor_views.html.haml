%aside.control-sidebar.control-sidebar-light#views-editor
  %a.aside-close#close-views-editor
    .label.bg-gray
      X
  %ul.nav.nav-tabs
    %li.active
      %a{"aria-expanded" => "true", "data-toggle" => "tab", :href => "#editor_views_tab_1"}
        %i.fa.fa-desktop
  .tab-content.container-files.bg-gray
    #editor_views_tab_1.tab-pane.active
      - @views.each do |view|
        .box.box-solid
          .box-header.with-border{title: "#{view.name}"}
            .row
              .col-lg-6
                %h4.box-title
                  %i.fa.fa-desktop
                  = truncate(view.name, length: 30, omission: '...')
              .col-lg-3
                %span.box-title
                  %a.btn.btn-default.pull-right{onclick: "copy('#{view.id}')"}
                    %input.hidden{id: "#{view.id}", value: "#{view.path}"}
                    %i.fa.fa-save
              .col-lg-2
                %span.box-title
                  = link_to view.route, class: 'btn btn-default pull-right' do
                    %i.fa.fa-reply

.control-sidebar-bg

:javascript
  $('a[data-toggle="tab"]').on('shown.bs.tab', function (ev) {
    $(document).keypress("s",function(e) {
      if(e.ctrlKey && e.key=='s') {
        e.preventDefault();
        var tab = ev.target.innerText;
        if (tab==='') {
          var tab = `#{@view.name}.html.erb`;
        }
        var id = `#{@view.id}`
        if ( tab === `#{@view.name}.html.erb`) {
          codeHTML.save(id);
        } else if (tab === `#{@view.name}.scss`) {
          codeCSS.save(id);
        } else if (tab === `#{@view.name}.js`) {
          codeJs.save(id);
        } else if (tab === 'Action') {
          codeAction.save(id);
        }
      }
    });
  })
