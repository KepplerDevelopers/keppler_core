#colors
  = f.simple_fields_for :appearance, html: { multipart: true } do |f|
    .col-md-7.col-lg-6
      .box.slice-box.hidden-xs
        .box-header.with-border
          %h3.box-title= t('keppler.customize.preview')
        / /.box-header
        .box-body.box-body-no-padding
          - if f.object.image_background?
            .appearance-img.devise-new-img{ style: "background-image:url(#{f.object.image_background_url})" }
              = render 'admin/settings/components/preview', f: f
          - else
            .appearance-img{ style: "background-image:url('/assets/admin/profile-menu.jpg')" }
              = render 'admin/settings/components/preview', f: f
    .col-md-5.col-lg-6
      .box.slice-box.p-15
        .box-header.with-border
          %h3.box-title= t('keppler.customize.admin-theme')

        .box-body
          .form-group
            .file-uploader
              .file-container{ style: "background-image: url(#{f.object.image_background_url})", class: ('already-uploaded' if f.object.image_background_url) }
                = f.input :image_background # , multiple: true
                %i.file-icon.icon-picture
                %h5.file-text= t 'keppler.actions.drop_files'
            %p= t 'appearance.main_color'
            %input.form-control#colorpicker{ type: 'text', name: 'color', placeholder: 'Color', value: color }
          .pull-right
            = f.button :submit, t('keppler.actions.apply'), class: 'btn btn-primary change-color'
            - if @render.eql?('appearance')
              = link_to appearance_default_admin_settings_path(@render), class: 'btn btn-default', method: :put do
                = t('keppler.actions.appearance_defaut')
      .box.slice-box.p-15
        .box-header.with-border
          %h3.box-title= t('keppler.customize.language')

        .box-body
          = f.input :language, collection: languages.map { |lang| [t("keppler.language.#{lang}"), lang] }, label: false, include_blank: false
          .pull-right
            = f.button :submit, t('keppler.actions.apply'), class: 'btn btn-primary change-color'

:javascript
  $(function() {
      $('#colorpicker').colorpicker({
        customClass: 'colorpicker-2x',
        sliders: {
          saturation: {
            maxLeft: 200,
            maxTop: 200
          },
          hue: {
            maxTop: 200
          },
          alpha: {
            maxTop: 200
          }
        }
      }).on('changeColor', function(e) {
        $('.logo span').css('color', e.color)
        $('.keppler-background').css('background', e.color)
        $('.keppler-border-top-color').css('border-top-color', e.color)
        $('.keppler-border-left-color').css('border-left-color', e.color)
        $('.sidebar-toggle').css('background', e.color)
        $('.btn-primary').css('background', e.color)
        $('.slice-box').css('border-top-color', e.color)
        $('#span').css('color', e.color)
        $('.side-img-profile').css('background', e.color)
        $('.small-profile-img').css('background', e.color)
        $('.login-logo span').css('color', e.color)
        $('.login-footer span').css('color', e.color)
        $('.sidebar-menu > li:hover > a, .sidebar-menu > li.active > a')
          .css({
            'color': e.color,
            'border-left-color': e.color
          })
      });
    });
