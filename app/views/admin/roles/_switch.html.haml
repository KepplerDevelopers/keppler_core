= simple_form_for @role, url: admin_role_create_permissions_path(role), method: :post do |f|
  %label
    - if !role.have_action?(module_name, action)
      .switch.pull-right
        %input{name: "role[module]", type: "hidden", value: module_name}
        %input{name: "role[action]", type: "hidden", value: action}
        %input{id: "switch-#{module_name}-#{action}", type: "checkbox"}/
        %label.label-default{:for => "switch-#{module_name}-#{action}", onclick: "sendPermission('#{module_name}', '#{action}')"}

    - else
      .switch.pull-right
        %input{name: "role[module]", type: "hidden", value: module_name}
        %input{name: "role[action]", type: "hidden", value: action}
        %input{id: "switch-#{module_name}-#{action}", type: "checkbox",  checked: "checked"}/
        %label.label-default{:for => "switch-#{module_name}-#{action}", onclick: "sendPermission('#{module_name}', '#{action}')"}

:javascript
  function sendPermission(module_name, action) {
    $('#switch-'+module_name+'-'+action).parent().parent().parent().submit()
  }
