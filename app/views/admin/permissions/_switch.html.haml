= simple_form_for @role, url: admin_role_toggle_permissions_path(@role), method: :post, remote: true do
  %label.switch-box
    = @role.have_all_actions?(module_name, actions) || false
    - if @role.permission_to(module_name)
      -# = @role.all_permissions[module_name]['actions'].reject(&:empty?)
      = (@role.all_permissions[module_name]['actions'].reject(&:empty?) - actions.reject(&:empty?)).empty?
      -# %br
    %label.switch
      %input{ name: 'role[module]', type: 'hidden', value: module_name }
      - actions.each do |action|
        %input{ name: 'role[actions][]', type: 'hidden', value: action }
      %input{ id: "all-#{module_name.split('::').join('')}", type: 'checkbox', class: "#{'active' if @role.have_all_actions?(module_name, actions)}" }
      %span.slider.round{ onclick: "send('#{module_name}', '#{actions}')" }

    -# - else
    -#   %label.switch
    -#     %input{ name: 'role[module]', type: 'hidden', value: module_name }
    -#     %input{ name: 'role[action]', type: 'hidden', value: action }
    -#     %input.active{ id: "switch-#{module_name.split('::').join('')}-#{action}", type: 'checkbox', checked: 'checked' }
    -#     %span.slider.round{ onclick: "sendPermission('#{module_name}', '#{action}')" }

:javascript
  function send(module_name, actions) {
    // var array = JSON.parse(actions);
    console.log($('#all-'+module_name.split('::').join('')).parent('form').submit())
    $('#all-'+module_name.split('::').join('')).parent().parent().parent().submit()
    // array.forEach(function(element) {
    //   $('#switch-'+module_name.split('::').join('')+'-'+element).parent('form').submit()
    // });
  }
